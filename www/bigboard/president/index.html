<!DOCTYPE html>
<html lang="en">
    <head>
        <title>The President</title>
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.7.3/build/cssreset/cssreset-min.css">
        <link rel="stylesheet" type="text/css" href="../../bootstrap/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="../css/app.css" />
        <link rel="stylesheet" type="text/css" href="../css/president.css" />
    </head>
    <body>
        <div id="banner"></div>
        <div id="candidates">
            <div class="weighted"></div>
            <div class="full"></div>
        </div>

        <script type="text/javascript" src="../../js/lib/jquery-1.8.1.min.js"></script>
        <script type="text/javascript" src="../../js/lib/jquery.columnizer.js"></script>
        <script type="text/javascript" src="../../js/lib/underscore-min.js"></script>
        <script type="text/javascript" src="../../js/lib/humanize.min.js"></script>
        <script type="text/javascript" src="../../js/lib/moment.min.js"></script>
        <script type="text/javascript" src="../../bootstrap/js/bootstrap.js"></script>
        <script type="text/javascript" src="../js/president.js"></script>
        <script type="text/javascript">
            function roundNumber(number, digits) {
                var multiple = Math.pow(10, digits);
                var rndedNum = Math.round(number * multiple) / multiple;
                return rndedNum;
            }
        </script>
        <!--[if lt IE 9]>
        <script src="js/lib/html5.js"></script>
        <![endif]-->

        <script id="banner-template" type="text/template">
            <h1>President</h1>
            <ul>
                <li id="dem_sec">
                    <h2>Obama <span class="total"><%= data.president.democrats.total %></span> <span class="need">Needs </span><span class="neednum"><%= data.president.democrats.needed_for_majority %></span></h2>
                </li>
                <li id="gop_sec">
                    <h2>Romney <span class="total"><%= data.president.republicans.total %></span> <span class="need">Needs </span><span class="neednum"><%= data.president.republicans.needed_for_majority %></span></h2>
                </li>
            </ul>
        </script>

        <script id="timezone-template" type="text/template">
            <div class="closeTimeBar">
                <% date = moment.unix(timezone.gmt_epoch_time).format('h:mm'); %>
                <%= date %>
            </div>
            <% _.each(timezone.states, function(state){ %>
                <%
                    var winner = '';
                    var called = '';
                    var state_name = state.name
                    if (state.call == 'd') { winner = 'dem'; }
                    if (state.call == 'r') { winner = 'gop'; }
                    if (winner != '') { called = 'called'; }
                    state_name = state_name.replace('District of Columbia', 'Wash. D.C.');
                    state_name = state_name.replace('North', 'N.');
                    state_name = state_name.replace('West', 'W.');
                    state_name = state_name.replace('South', 'S.');
                    state_name = state_name.replace('Statewide', '');
                    state_name = state_name.replace('Massachusetts', 'Mass.');
                    state_name = state_name.replace('Pennsylvania', 'Penn.');
                    state_name = state_name.replace('District ', 'D');
                    state_name = state_name.replace('New Hampshire', 'N. Hampshire');
                %>
                <ul class="allstates">
                	<li class="percentTime <%= called %>">
                    <%= state.status %>
                    </li>
                    <li class="district"></li>
                    <li class="state <%= winner %>"><span class="name"><%= state_name %></span>
                        <span class="votes"> (<%= state.electoral_votes %>)</span></li>
                    <li class="demPercent"><%= state.dem_vote_percent %></li>
                    <li class="gopPercent"><%= state.rep_vote_percent %></li>
                </ul>
            <% }); %>
        </script>

        <script id="featured-template" type="text/template">
            <%
                var winner = '';
                var called = '';
                var state_name = state.name;
                if (state.call == 'd') { winner = 'dem'; }
                if (state.call == 'r') { winner = 'gop'; }
                if (winner != '') { called = 'called'; }
                state_name = state_name.replace('North', 'N.');
                state_name = state_name.replace('New', 'N.');
                state_name = state_name.replace('West', 'W.');
                state_name = state_name.replace('South', 'S.');
                state_name = state_name.replace('Statewide', '');
                state_name = state_name.replace('Massachusetts', 'Mass.');
                state_name = state_name.replace('Pennsylvania', 'Penn.');
            %>
            <ul class="swing">
                <li class="percentTime <%= called %>">
                <%= state.status %>
                </li>
                <li class="district"></li>
                <li class="state <%= winner %>"><span><%= state_name %></span> (<%= state.electoral_votes %>)</li>
                <li class="demPercent"><%= state.dem_vote_percent %></li>
                <li class="gopPercent"><%= state.rep_vote_percent %></li>
            </ul>
        </script>
    </body>
</html>
